{% extends 'base.html' %}
{% load static %}

{% block title %}Aloqa{% endblock %}

{% block extra_css %}
<link href="{% static 'main/css/news.css' %}" rel="stylesheet">
{% endblock %}

{% block content %}
<main style="padding-top: 80px;">
    <h2 class="text-center mb-5 section-title fw-bold">Aloqa</h2>
</main>


<section class="container">
    <div class="row d-flex align-items-center">
        <div class="col-md-4 mb-4">
            <form class="container gap-3 py-4 px-3" id="contact-form" method="post" novalidate>
                {% csrf_token %}
                
                <div id="error-message" class="alert alert-danger d-none" role="alert">
                    Iltimos, barcha maydonlarni to'ldiring!
                </div>

                {% if success %}
                <div class="alert alert-success alert-dismissible fade show" role="alert">
                    <strong>Xabaringiz yuborildi!</strong>
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Yopish"></button>
                </div>
                {% endif %}

                <div class="mb-3">
                    <label for="id_name" class="form-label">Ismingiz</label>
                    <input type="text" name="name" class="form-control" id="id_name" placeholder="Ismingiz" required>
                </div>

                <div class="mb-3">
                    <label for="id_contact_info" class="form-label">Telefon raqam yoki Email</label>
                    <input type="text" name="contact_info" class="form-control" id="id_contact_info"
                           placeholder="+998901234567 yoki email@example.com" required>
                </div>

                <div class="mb-3">
                    <label for="id_message" class="form-label">Xabaringiz</label>
                    <textarea name="message" class="form-control" id="id_message" rows="4"
                              placeholder="Xabaringizni yozing..." required></textarea>
                </div>

                <button class="btn btn-warning text-white" type="submit">
                    Jo'natish
                </button>
            </form>

            <p class="contact-item mt-3">
                <i class="bi bi-telephone-fill text-success me-2"></i>
                <a href="tel:+998972111402">+998 99 311 78 80</a>
            </p>

            <p class="contact-item">
                <i class="bi bi-envelope-fill text-warning me-2"></i>
                <a href="mailto:pitnak8maktab@gmail.com">pitnak8maktab@gmail.com</a>
            </p>

            <p class="contact-item">
                <i class="bi bi-geo-alt-fill text-danger me-2"></i>
                <a href="https://maps.app.goo.gl/rmxpqma1Umpi5b4v6" target="_blank">Tuproqqal'a Tuman</a>
            </p>

            <div class="d-flex gap-4 mt-3">
                <a class="bi bi-telegram text-primary fs-3" href="" target="_blank"></a>
                <a class="bi bi-youtube text-danger fs-3" href="" target="_blank"></a>
            </div>
        </div>

        <div class="col-md-8">
            <iframe
                src="https://maps.app.goo.gl/nePFMBsQyr1fmPKN9"
                width="100%"
                height="450"
                style="border:0;"
                allowfullscreen=""
                loading="lazy"
                referrerpolicy="no-referrer-when-downgrade">
            </iframe>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
    const form = document.getElementById('contact-form');
    const errorMessage = document.getElementById('error-message');

    form.addEventListener('submit', function (e) {
        const name = document.getElementById('id_name').value.trim();
        const contact = document.getElementById('id_contact_info').value.trim();
        const message = document.getElementById('id_message').value.trim();

        if (!name || !contact || !message) {
            e.preventDefault();
            errorMessage.classList.remove('d-none');
        } else {
            errorMessage.classList.add('d-none');
        }
    });
</script>
{% endblock %}