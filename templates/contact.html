{% extends 'base.html' %}
{% load static %}

{% block title %}Aloqa{% endblock %}

{% block extra_css %}
<link href="{% static 'main/css/news.css' %}" rel="stylesheet">
{% endblock %}

{% block content %}
<main style="padding-top: 80px;">
    <h2 class="text-center mb-5 section-title fw-bold">Aloqa</h2>
</main>


<section class="container">
    <div class="row d-flex align-items-center">
        <div class="col-md-4 mb-4">
            <form class="container gap-3 py-4 px-3" id="contact-form" method="post" novalidate>
                {% csrf_token %}

                <div class="alert alert-danger d-none" id="error-message" role="alert">
                    Iltimos, barcha maydonlarni to'ldiring!
                </div>

                {% if success %}
                <div class="alert alert-success alert-dismissible fade show" role="alert">
                    <strong>Xabaringiz yuborildi!</strong>
                    <button aria-label="Yopish" class="btn-close" data-bs-dismiss="alert" type="button"></button>
                </div>
                {% endif %}

                <div class="mb-3">
                    <label class="form-label" for="id_name">Ismingiz</label>
                    <input class="form-control" id="id_name" name="name" placeholder="Ismingiz" required type="text">
                </div>

                <div class="mb-3">
                    <label class="form-label" for="id_contact_info">Telefon raqam yoki Email</label>
                    <input class="form-control" id="id_contact_info" name="contact_info" placeholder="+998901234567 yoki email@example.com"
                           required type="text">
                </div>

                <div class="mb-3">
                    <label class="form-label" for="id_message">Xabaringiz</label>
                    <textarea class="form-control" id="id_message" name="message" placeholder="Xabaringizni yozing..."
                              required rows="4"></textarea>
                </div>

                <button class="btn btn-warning text-white" type="submit">
                    Jo'natish
                </button>
            </form>

            <p class="contact-item mt-3">
                <i class="bi bi-telephone-fill text-success me-2"></i>
                <a href="tel:+998972111402">+998 99 311 78 80</a>
            </p>

            <p class="contact-item">
                <i class="bi bi-envelope-fill text-warning me-2"></i>
                <a href="mailto:pitnak8maktab@gmail.com">pitnak8maktab@gmail.com</a>
            </p>

            <p class="contact-item">
                <i class="bi bi-geo-alt-fill text-danger me-2"></i>
                <a href="https://www.google.com/maps/embed?pb=rmxpqma1Umpi5b4v6" target="_blank">Tuproqqal'a Tuman</a>
            </p>

            <div class="d-flex gap-4 mt-3">
                <a class="bi bi-telegram text-primary fs-3" href="" target="_blank"></a>
                <a class="bi bi-youtube text-danger fs-3" href="" target="_blank"></a>
            </div>
        </div>

        <div class="col-md-8">
            <iframe
                    allowfullscreen=""
                    height="450"
                    loading="lazy"
                    referrerpolicy="no-referrer-when-downgrade"
                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1444.3511606494692!2d61.299898861530686!3d41.19863469787446!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3f60018a07f884c5%3A0x8bf6742ed4735ab4!2z0KHRgNC10LTQvdGP0Y8g0YjQutC-0LvQsCDihJY4!5e1!3m2!1suz!2s!4v1745759232315!5m2!1suz!2s"
                    style="border:0;"
                    width="100%">
            </iframe>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
    const form = document.getElementById('contact-form');
    const errorMessage = document.getElementById('error-message');

    form.addEventListener('submit', function (e) {
        const name = document.getElementById('id_name').value.trim();
        const contact = document.getElementById('id_contact_info').value.trim();
        const message = document.getElementById('id_message').value.trim();

        if (!name || !contact || !message) {
            e.preventDefault();
            errorMessage.classList.remove('d-none');
        } else {
            errorMessage.classList.add('d-none');
        }
    });
</script>
{% endblock %}